<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Soubhik Deb | KZG</title>
    <meta name="description" content="">

    <!-- Open Graph -->


    <!-- Bootstrap & MDB -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg=="
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css"
        integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q=="
        crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
        integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css"
        integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg=="
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

    <!-- Styles -->
    <link rel="shortcut icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" href="/assets/css/main.css">

    <link rel="canonical" href="/publications/">

    <!-- Theming-->



    <!-- MathJax -->
    <script defer type="text/javascript" id="MathJax-script"
        src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
    <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    

</head>

<style>
    .styled-table {
        border-collapse: collapse;
        margin: 25px 0;
        font-size: 0.9em;
        /* font-family: sans-serif; */
        min-width: 400px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
    }

    .styled-table thead tr {
        background-color: #a887b3;
        color: #ffffff;
        text-align: center;
        font-weight: bold;
    }


    .styled-table th,
    .styled-table td {
        padding: 10px 15px;
        /* table-layout: auto;
        width: 100%; */
    }

    .styled-table tbody tr {
        border-bottom: 1px solid #dddddd;
        text-align: left;
    }

    /* .styled-table tbody tr:nth-of-type(even) {
        background-color: rgb(243, 243, 243);
    } */

    .styled-table tbody tr:last-of-type {
        border-bottom: 2px solid #a887b3;
    }

    .styled-table tbody tr.active-row {
        font-weight: bold;
        color: #a887b3;
    }

    .box {
        /* border: 5px solid darkblue; */
        width: 120px;
        margin: 1%;
        padding: 1%;
    }

    .cropgif {
        /* vertical-align: top; */
        object-fit: cover;
        width: 750px;
        height: 250px;
        object-position: 10% 40%;
    }
    
    .cropgif1 {
        /* vertical-align: top; */
        object-fit: cover;
        width: 750px;
        height: 500px;
        object-position: 10% 40%;
    }

    .shadedBox {
        text-align: center;
        border: 1px ;
        padding: 10px;
        box-shadow: 5px 10px 18px rgb(33, 85, 215);
    }

</style>

<body class="fixed-top-nav ">

    <!-- Header -->

    <header>

        <!-- Nav Bar -->
        <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
            <div class="container">

                <!-- <a class="navbar-brand title font-weight-lighter" href="/">
       <span class="font-weight-bold">Soubhik</span> 
      </a> -->


                <!-- Social Icons -->
                <div class="row ml-1 ml-sm-0">
                    <span class="contact-icon text-center">
                        <!-- <a href="mailto:soubhik@uw.edu"><i class="fas fa-envelope"></i></a> -->

                        <!-- <a href="https://scholar.google.com/citations?user=cDprpEIAAAAJ&hl=en" target="_blank" title="Google Scholar"><i class="ai ai-google-scholar"></i></a> -->
                        <!-- <a href="https://semanticscholar.com/author/2705113" target="_blank" title="Semantic Scholar"><i class="ai ai-semantic-scholar"></i></a> -->


                        <!-- <a href="https://github.com/dragonboy1994" target="_blank" title="GitHub"><i class="fab fa-github"></i></a> -->

                        <!-- <a href="https://twitter.com/soubhikdeb" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a> -->

                        <!-- <a href="https://www.linkedin.com/in/sdeb/" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i></a> -->




                    </span>

                </div>

                <!-- Navbar Toogle -->
                <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse"
                    data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar top-bar"></span>
                    <span class="icon-bar middle-bar"></span>
                    <span class="icon-bar bottom-bar"></span>
                </button>
                <div class="collapse navbar-collapse text-right" id="navbarNav">
                    <ul class="navbar-nav ml-auto flex-nowrap">
                        <!-- About -->
                        <li class="nav-item active">
                            <a class="nav-link" href="/blog/">
                              blog
                              
                                <span class="sr-only">(current)</span>
                              
                            </a>
                        </li>
                          
                          <!-- Other pages -->

                    </ul>
                </div>
            </div>
        </nav>

    </header>


    <!-- Content -->

    <div class="container mt-5">
        <div class="post">

            <header class="post-header">
                <h1 class="post-title">Kate-Zaverucha-Goldberg (KZG) Polynomial Commitments and its Extensions</h1>
                <!-- <p class="desc">Also see <a href="https://scholar.google.com/citations?user=3uTVQt0AAAAJ">Google Scholar</a></p> -->
            </header>

            <div class="text-justify p-0">
            <!-- <article class="post-content text-justify">
                <p>This theme supports rendering beautiful math in inline and display modes using <a href="https://www.mathjax.org/" target="\_blank">MathJax 3</a> engine. You just need to surround your math expression with <code class="language-plaintext highlighter-rouge">$$</code>, like <code class="language-plaintext highlighter-rouge">$$ E = mc^2 $$</code>. If you leave it inside a paragraph, it will produce an inline expression, just like \(E = mc^2\).</p>
            
                <p>To use display mode, again surround your expression with <code class="language-plaintext highlighter-rouge">$$</code> and place it as a separate paragraph. Here is an example:</p>
            
                    \[\left( \sum_{k=1}^n a_k b_k \right)^2 \leq \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)\]
            
                 <p>Note that MathJax 3 is <a href="https://docs.mathjax.org/en/latest/upgrading/whats-new-3.0.html" target="\_blank">a major re-write of MathJax</a> that brought a significant improvement to the loading and rendering speed, which is now <a href="http://www.intmath.com/cg5/katex-mathjax-comparison.php" target="\_blank">on par with KaTeX</a>.</p>
            
            </article> -->
            <h1 style="font-size:24px;">Motivation</h1>
                <p>Suppose you are only one in the world who is in the possession of the following polynomial \(f(x)\) of the form:</p>  

                    \[ f(x) = a_0 + a_1 x + a_2 x^2 + \cdots + a_d x^d, \tag{1} \] 
                <p>where \(d\) is the degree of the polynomial.</p> 

                <p>What will you do if your friend wants the evaluation of this polynomial \(f(x)\) at some point \(x = 10\)?</p> 
                
                <p>The first option would be that you can just share your polynomial with your friend and then your friend can evaluate
                the polynomial \(f(x)\) for himself. But what if the polynomial is very "big", that is, have very large degree \(d\) and 
                your friend has very limited compute resource? Even with optimal methods like <a href="https://en.wikipedia.org/wiki/Horner%27s_method">Horner's method</a>, 
                eveluating the polynomial \(f(x)\) would take \(d\) multiplication and \(d\) addition operations. Additionally, it could also be the case that the message channel between you and your 
                friend has limited capacity. You might wonder that with computers being so powerful and network bandwidth being so high, how is it 
                possible to be resource-constrained. To give you a practical example, let us consider your friend to be Ethereum post-<a href="https://notes.ethereum.org/@vbuterin/proto_danksharding_faq">EIP 4844 (proto-danksharding)</a>.
                Here, the degree \(d\) of the polynomial can go upto \(4096\) and each evaluation point will be of size 32 bytes (let us ignore what 
                this "big" polynomial is going to be used for). Now, unless you want to pay for high gas, your friend Ethereum's compute and bandwidth resource is all resource-constrained.
                </p> 

                <p>The alternative option would be for you to do the evaluation of the polynomial \(f(x)\) at the point \(x = 10\) and 
                    send it to your friend. However, there is a catch as shown in the following conversation:
                </p>
                <div class="row">
                    <div class="col-sm mt-3 mt-md-0 mb-3">
                    <img class="img-fluid cropgif rounded z-depth-1" src="/assets/img/kzg1.gif" alt="" title="motivation" />
                    <figcaption>Fig.1 Motivation. </figcaption>    
                    </div>
                </div>

                <p>
                    The catch is in how can your friend verify that the value \(y\) you sent is equal to \(f(10)\). One way to accomplish that would be to
                    send the whole polynomial \(f(x)\), that is its coeficients \(a_i \hspace{0.1cm} \forall i \in \{0, \cdots, d\}\), which your friend can 
                    use to evaluate \(f(10)\) and check that \(y == f(10)\) or not.  But then we encounter the aforementioned resource-constraints. Additionally, it 
                    could be the case that out of privacy concerns, you don't want to reveal your polynomial \(f(x)\) to anyone, even to your friend.
                </p>

                
                <h1 style="font-size:24px;">Intuition</h1>
                <p>Referring to Fig.1, a wishful thinking would be what if you can generate a "very short" evidence \(\pi\) such that:
                   <ul>
                    <li> you can send the evidence \(\pi\) to your friend along with the value \(y\) that would convince your friend \(y == f(10)\), and </li>
                    <li> this evidence \(\pi\) doesn't reveal anything to your friend about your polynomial \(f(x)\). This property is called <i>hiding</i>. </li>
                   </ul>   
                If we have such an evidence, it seems we are all set. 
                </p>

                <p>
                But wait! Let us reverse the scenario - now your friend is claiming to be in posession of the polynomial \(f(x)\) and 
                you want evaluation of \(f(x)\) at point \(x=10\). Would you be willing to trust your friend that she gave you the evaluation of the same 
                polynomial for which she claimed to be in possession of?
                </p>

                <p>
                One very natural way to solve this trust issue is to have your friend first send a short representation \(C\) of the polynomial \(f(x)\) she is in 
                possession of. Sending this short representation is like a "commitment" that your friend is making to you about the polynomial \(f(x)\) she is 
                in possession of. This property is called as <i>polynomial binding</i>. Now, later when you send your evaluation point, your friend would send the evidence \(\pi\) of correct evaluation which you can use 
                along with the commitment \(C\) to verify that your friend did everything correctly!  
                </p>

                <p> The following conversation illustrates the above intuition.</p>

                <div class="row">
                    <div class="col-sm mt-3 mt-md-0 mb-3">
                    <img class="img-fluid cropgif rounded z-depth-1" src="/assets/img/kzg2.gif" alt="" title="intuition" />
                    </div>
                </div>

                <p> This above intuition is formalized in the KZG polynomial commitment protocol as described in the next section. </p>

                <p> It is very important that your friend sends you the commitment \(C\) before you send your evaluation point. Otherwise, your friend can fool you 
                    by sending a correct evaluation for a polynomial that is different from the polynomial \(f(x)\) she was claiming to 
                    be in possession of.
                </p>



                <h1 style="font-size:24px;">KZG Polynomial Commitment Protocol</h1>
                <p>KZG polynomial commitment was proposed by Kate (pronounced as "Katey"), Zaverucha and Goldberg in this <a href="https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf">paper</a> back in 2010.
                In a change of notation that we will be following consistently from now on, we will call the person claiming to be in possession of polynomial \(f(x)\) as "prover"
                and the other person who wants an evaluation of that polynomial \(f(x)\) (recall that this person doesn't know the coeffcients of \(f(x)\)) as "verifier".
                </p>

                <p>
                    In order to construct the protocol around the intuition present in previous section, we will take help of cyclic groups and bilinear pairing that have been
                    described in this <a href="./../group_theory/index.html">note</a>. The protocol proceeds in multiple steps and the pattern that you see here is followed
                    in the more complex protocols that you will read later.
                </p>

                <h4 style="font-size:20px;"><u>1. Setup</u></h4>
                <p>
                    Okay, this might sound very weird at first but the first step of KZG protocol is to have a ceremony where many folks (preferrably hundreds and thousands of people from around the world) come together to contribute 
                    towards constructing a special object called <i>powers-of-tau</i>. I am sure this might not be apparent but powers-of-tau and its security is super-critical to get the property of polynomial binding and hiding. This 
                    will be made clear later, please bear patience with me &#129303;.   
                </p>
                <p> Construction of powers-of-tau requires everyone to first come to an agreement on the following core parameter assumptions:
                    <ul>
                        <li> three groups \(G_1\), \(G_2\) and \(G_T\), </li>
                        <li> a bilinear mapping called pairing \(e: G_1 \times G_2 \rightarrow G_T\) over these three groups,</li>
                        <li> two positive integers \(d_1\) and \(d_2\).</li>
                    </ul>
                    You can see this <a href="https://github.com/ethereum/kzg-ceremony-specs/blob/master/docs/cryptography/BLS.md#standard">spec</a> for ETH2 PoS to get an idea how these parameters look like.
                </p>
                <p> 
                    Once this done, the power-of-tau ceremony is initiated where each participant has to choose their own random secret and then add it to a running aggregate of all random secrets added before by others. Note that
                    you will not be able to know the random secrets of other people just by looking at the running aggregate. You can read more about how this ceremony achieves this property <a href="https://vitalik.ca/general/2022/03/14/trustedsetup.html"> here </a>. 
                    At a high-level this important property is inherited from DL hardness assumption (see <a href="./../hardness_assumptions/index.html">here</a>)
                    and is necessary for KZG protocol to be secure.
                </p>  
                <p>
                    At the end of the ceremony, the powers-of-tau setup looks something like this:

                        $$ \begin{align}
                            &\{[1]_1, [s]_1, [s^2]_1, \cdots, [s^{d_1}]_1 \}, \\
                            &\{[1]_2, [s]_2, [s^2]_2, \cdots, [s^{d_2}]_2 \}
                           \end{align} 
                        $$
                    Please check <a href="./../group_theory/index.html"> this </a> for further details on the above notations. Now, 
                    <div class="shadedBox">
                        <p>&#127759 Powers-of-tau setup is a global knowledge that everyone will know.</p>
                    </div>
                </p>

                <p>
                    One question is how large the size this powers-of-tau setup should be. Basically, how big is \(d_1\) and \(d_2\). That is completely dependent upon the system designer on how big of a polynomial do they want to support.
                </p>

                <p>
                    Once the powers-of-tau ceremony is over, it is critical that at least one of the participants is honest and destroys the random secret it contributed. This ensures that the aggregate secret \(s\) remains random to everyone, even 
                    if they look at the powers-of-tau &#129305;.
                </p>

                <div class="row">
                    <div class="col-sm mt-3 mt-md-0 mb-3">
                    <img class="img-fluid cropgif rounded z-depth-1" src="/assets/img/ceremony.gif" alt="" title="intuition" />
                    </div>
                </div>


                <h4 style="font-size:20px;"><u>2. Commit</u></h4>
                <p>
                This step is for the prover to bind itself to the polynomial \(f(x)\) that it is in possession of, <i>aka</i> polynomial binding. In order to do so, the prover's just have to evaluate the commitment \(C\) given by

                    \[ C = [f(s)]_1 \]

                where \(s\) is the secret obtained during powers-of-tau ceremony that no one is supposed to know. You might be wondering that if secret \(s\) is unknown, then how the hell the prover is going to evaluate the commitment \(C\).
                </p>

                <p>
                    The trick here is to do linear combination of the group elements on the powers-of-tau. Recalling eq.(1), we have:

                        $$  
                        \begin{align}
                            [f(s)]_1 &= [a_0 + a_1 s + a_2 s^2 + \cdots + a_d s^d]_1, \quad \quad \text{from eq. (1)}\\
                                    &= (a_0 + a_1 s + a_2 s^2 + \cdots + a_d s^d) \cdot g_1 \\
                                    &= a_0 \cdot g_1 + (a_1 s) \cdot g_1 + (a_2 s^2) \cdot g_1 + \cdots + (a_d s^d) \cdot g_1 \\
                                    &= a_0 \cdot g_1 + a_1 \cdot (s \cdot g_1) + a_2 \cdot (s^2 \cdot g_1) + \cdots + a_d \cdot (s^d \cdot g_1) \\
                                    &= a_0 \cdot [1]_1 + a_1 \cdot [s]_1 + a_2 \cdot [s^2]_1 + \cdots + a_d \cdot [s^d]_1. 
                        \end{align}
                        $$

                    With this re-writing, the prover can  compute  the commitment \(C\) by picking the first \(d\) elements from the first vector in powers-of-tau and just do a linear combination on them while using the 
                    coeefficients of \(f(x)\) as the scalars. One important thing to observe that in order for above computation to be even possible, it is necessary that \(d \leq d_1 \). Finally,
                </p>
                
                <div class="shadedBox">
                    <p>&#9193 Prover sends commitment \(C\) to the verifier.</p>
                </div>



                <h4 style="font-size:20px;"><u>3. Challenge</u></h4>

            </div>
        </div>
    </div>

    <!-- Footer -->


    <footer class="fixed-bottom">
        <div class="container mt-0">
            &copy; Copyright 2023 Soubhik Deb.

        </div>
    </footer>



</body>

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
    crossorigin="anonymous"></script>

<!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js"
    integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A=="
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ=="
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"
    integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw=="
    crossorigin="anonymous"></script>


<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>






<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>

<!-- Load DarkMode JS -->
<script src="/assets/js/dark_mode.js"></script>


</html>